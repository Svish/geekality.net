---
title: 'PHP: Proper age calculation'
published: '2011-05-29'
permalinks:
  - /2011/05/29/php-proper-age-calculation/
  - /?p=1397
categories:
  - software-development
tags:
  - age
  - date
  - php
  - snippet
---

Always struggle with calculating age in PHP for some reason. And there seems to be quite varying ideas on how this should be done. So decided to once and for all sit down and figure out how I could do this.

Found <a href="http://00f.net/2007/06/04/an-age-is-not-a-duration/">an article</a> which explained pretty well why I was a bit confused. It also had a code example in Perl(?).

So, thought I could stick a PHP version here in case that page dies or I forget. Actually there are two. The first calculates the age kind of manually, and can be used in PHP 4 and PHP 5. The second is a lot shorter and simpler, but requires PHP 5.3.

Enjoy ðŸ™‚

```php
// Manual way. Takes unix time stamps.
function getAge($birth, $now = NULL)
{
    $now = getdate($now === NULL ? time() : $now);
    $birth = getdate($birth);

    $age = $now['year'] - $birth['year'];

    if($now['mon'] < $birth['mon']
        || ($now['mon'] == $birth['mon'] && $birth['mday'] > $now['mday']))
    {
        $age -= 1;
    }

    return $age;
}
```

This next function uses the <a href="http://php.net/manual/en/datetime.diff.php">DateTime::diff</a> method available in PHP 5.3.

```php
// Takes dates like 'yyyy-mm-dd'
function getAge($birth, $now = NULL)
{
    $now = new DateTime($now);
    $birth = new DateTime($birth);

    return $birth->diff($now)->format('%r%y');
}
```

You can test them out at <a href="http://samples.geekality.net/age/">samples.geekality.net/age</a> ðŸ™‚
